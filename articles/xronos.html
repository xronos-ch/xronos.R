<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Chronological data from XRONOS in R • xronos</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/yeti/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Chronological data from XRONOS in R">
<meta property="og:description" content="xronos">
<meta property="og:image" content="/logo.svg">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">xronos</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.1.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/xronos.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/xronos-ch/xronos.R/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Chronological data from XRONOS in R</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/xronos-ch/xronos.R/blob/HEAD/vignettes/xronos.Rmd" class="external-link"><code>vignettes/xronos.Rmd</code></a></small>
      <div class="hidden name"><code>xronos.Rmd</code></div>

    </div>

    
    
<p><a href="https://xronos.ch" class="external-link">XRONOS</a> is a worldwide database of
chronological data (such as radiocarbon or dendrochronological dates)
from archaeological contexts. The xronos package allows you to retrieve
data from XRONOS directly using R. It also provides tools for inspecting
and transforming this data for analysis with commonly-used packages.</p>
<p>This vignette introduces the main features of the xronos package. It
covers:</p>
<ul>
<li>Querying and retrieving chronological data from XRONOS with
<code><a href="../reference/chron_data.html">chron_data()</a></code>
</li>
<li>Calibrating radiocarbon dates with xronos and c14</li>
<li>Mapping chronological data with xronos and sf</li>
</ul>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r.xronos.ch" class="external-link">xronos</a></span><span class="op">)</span></span></code></pre></div>
<div class="section level2">
<h2 id="get-chronological-data">Get chronological data<a class="anchor" aria-label="anchor" href="#get-chronological-data"></a>
</h2>
<p><code><a href="../reference/chron_data.html">chron_data()</a></code> provides an R interface to <a href="https://xronos.ch/api" class="external-link">XRONOS’ REST API</a> for retrieving
chronological data. Without further parameters, it will request all
available data from XRONOS.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/chron_data.html">chron_data</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>Since this takes some time, you will be prompted to confirm this
request. Use <code>chron_data(.everything = TRUE)</code> to confirm that
you do want to download all records from XRONOS and suppress this
prompt.</p>
<p>In practice, you’ll probably want to narrow down the dataset with a
search query. You can use the following parameters, passed as arguments
to <code><a href="../reference/chron_data.html">chron_data()</a></code>, to filter the results:</p>
<ul>
<li><code>labnr</code></li>
<li><code>site</code></li>
<li><code>site_type</code></li>
<li>
<code>country</code> (ideally a two-letter country code, otherwise
the function will attempt to interpret it as one using <a href="https://vincentarelbundock.github.io/countrycode/reference/countryname.html" class="external-link">countrycode::countryname()</a>)</li>
<li><code>feature</code></li>
<li><code>material</code></li>
<li><code>species</code></li>
</ul>
<p>You can combine any number of parameters, and each parameter can take
either a single value or a vector of values that should be included in
the results.</p>
<p>For example, to get all radiocarbon dates from Switzerland on either
charcoal or bone:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">chron_ch</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/chron_data.html">chron_data</a></span><span class="op">(</span>country <span class="op">=</span> <span class="st">"CH"</span>, material <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"charcoal"</span>, <span class="st">"bone"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>The results of the query are returned as a table of records (a
<code>tibble</code> if tibble is installed, otherwise a data frame):</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">chron_ch</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 1,847 × 21</span></span></span>
<span><span class="co">#&gt;       id labnr      bp   std cal_bp cal_std delta…¹ reference    sourc…² mater…³</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>  <span style="text-decoration: underline;">4</span>946 ETH-63…  <span style="text-decoration: underline;">9</span>044    35 <span style="color: #BB0000;">NA</span>     <span style="color: #BB0000;">NA</span>           <span style="color: #BB0000;">NA</span> &lt;named list&gt; AgriCh… charco…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>  <span style="text-decoration: underline;">4</span>947 ETH-63…  <span style="text-decoration: underline;">8</span>912    33 <span style="color: #BB0000;">NA</span>     <span style="color: #BB0000;">NA</span>           <span style="color: #BB0000;">NA</span> &lt;named list&gt; AgriCh… charco…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>  <span style="text-decoration: underline;">4</span>948 ETH-63…  <span style="text-decoration: underline;">8</span>909    47 <span style="color: #BB0000;">NA</span>     <span style="color: #BB0000;">NA</span>           <span style="color: #BB0000;">NA</span> &lt;named list&gt; AgriCh… charco…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>  <span style="text-decoration: underline;">4</span>949 ETH-63…  <span style="text-decoration: underline;">8</span>812    33 <span style="color: #BB0000;">NA</span>     <span style="color: #BB0000;">NA</span>           <span style="color: #BB0000;">NA</span> &lt;named list&gt; AgriCh… charco…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>  <span style="text-decoration: underline;">5</span>070 VERA-2…   235    35 <span style="color: #BB0000;">NA</span>     <span style="color: #BB0000;">NA</span>           <span style="color: #BB0000;">NA</span> &lt;named list&gt; AgriCh… charco…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>  <span style="text-decoration: underline;">5</span>134 UZ-2480  <span style="text-decoration: underline;">5</span>020    75 <span style="color: #BB0000;">NA</span>     <span style="color: #BB0000;">NA</span>           <span style="color: #BB0000;">NA</span> &lt;named list&gt; AgriCh… charco…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>  <span style="text-decoration: underline;">5</span>155 CRG-582  <span style="text-decoration: underline;">5</span>950   100 <span style="color: #BB0000;">NA</span>     <span style="color: #BB0000;">NA</span>           <span style="color: #BB0000;">NA</span> &lt;named list&gt; AgriCh… charco…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>  <span style="text-decoration: underline;">5</span>156 CRG-580  <span style="text-decoration: underline;">5</span>980   175 <span style="color: #BB0000;">NA</span>     <span style="color: #BB0000;">NA</span>           <span style="color: #BB0000;">NA</span> &lt;named list&gt; AgriCh… charco…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>  <span style="text-decoration: underline;">5</span>157 CRG-581  <span style="text-decoration: underline;">5</span>715   160 <span style="color: #BB0000;">NA</span>     <span style="color: #BB0000;">NA</span>           <span style="color: #BB0000;">NA</span> &lt;named list&gt; AgriCh… charco…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>  <span style="text-decoration: underline;">5</span>158 CRG-430  <span style="text-decoration: underline;">5</span>484   128 <span style="color: #BB0000;">NA</span>     <span style="color: #BB0000;">NA</span>           <span style="color: #BB0000;">NA</span> &lt;named list&gt; AgriCh… charco…</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># … with 1,837 more rows, 11 more variables: species &lt;chr&gt;, feature &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   periods &lt;list&gt;, typochronological_units &lt;list&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   ecochronological_units &lt;list&gt;, site &lt;chr&gt;, country &lt;chr&gt;, lat &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   lng &lt;chr&gt;, site_type &lt;chr&gt;, feature_type &lt;chr&gt;, and abbreviated variable</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   names ¹​delta_c13, ²​source_database, ³​material</span></span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="calibrating-radiocarbon-data">Calibrating radiocarbon data<a class="anchor" aria-label="anchor" href="#calibrating-radiocarbon-data"></a>
</h2>
<p>There are several R packages that include functions for radicarbon
calibration, including rcarbon, oxcAAR (requires external software), and
BChron. Calibrating radiocarbon data from XRONOS should follow the same
general principle whichever is used: pass the columns <code>bp</code>
and <code>std</code>—and possibly also <code>labnr</code> as a unique
ID—as arguments to the calibration function. For example, using
rcarbon:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/ahb108/rcarbon/" class="external-link">rcarbon</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">chron_moos</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/chron_data.html">chron_data</a></span><span class="op">(</span>site <span class="op">=</span> <span class="st">"Moos"</span><span class="op">)</span></span>
<span><span class="va">chron_moos</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">chron_moos</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"labnr"</span>, <span class="st">"bp"</span>, <span class="st">"std"</span><span class="op">)</span><span class="op">]</span><span class="op">)</span> <span class="co"># Remove duplicates</span></span>
<span></span>
<span><span class="va">chron_moos_cal</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/rcarbon/man/calibrate.html" class="external-link">calibrate</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">chron_moos</span><span class="op">$</span><span class="va">bp</span>,</span>
<span>                            errors <span class="op">=</span> <span class="va">chron_moos</span><span class="op">$</span><span class="va">std</span>,</span>
<span>                            ids <span class="op">=</span> <span class="va">chron_moos</span><span class="op">$</span><span class="va">labnr</span>,</span>
<span>                            verbose <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<p>The results are best understood using a plot:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/rcarbon/man/multiplot.html" class="external-link">multiplot</a></span><span class="op">(</span><span class="va">chron_moos_cal</span><span class="op">)</span></span></code></pre></div>
<p><img src="xronos_files/figure-html/plot-cal-1.png" width="700"></p>
</div>
<div class="section level2">
<h2 id="map-chronological-data">Map chronological data<a class="anchor" aria-label="anchor" href="#map-chronological-data"></a>
</h2>
<p>Wherever possible, XRONOS includes the geographic location of chrons,
stored as latitude and longitude coordinates. The convenience function
<code><a href="../reference/chron_as_sf.html">chron_as_sf()</a></code> converts these coordinates into a ‘simple
features’ geometry column for use with the sf package:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-spatial.github.io/sf/" class="external-link">sf</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; Linking to GEOS 3.10.2, GDAL 3.4.1, PROJ 8.2.1; sf_use_s2() is TRUE</span></span>
<span></span>
<span><span class="fu"><a href="../reference/chron_as_sf.html">chron_as_sf</a></span><span class="op">(</span><span class="va">chron_ch</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning: 570 rows with missing or invalid coordinates were removed.</span></span>
<span><span class="co">#&gt; Simple feature collection with 1277 features and 21 fields</span></span>
<span><span class="co">#&gt; Geometry type: POINT</span></span>
<span><span class="co">#&gt; Dimension:     XY</span></span>
<span><span class="co">#&gt; Bounding box:  xmin: 4.0911 ymin: 45.96543 xmax: 10.38184 ymax: 47.75</span></span>
<span><span class="co">#&gt; Geodetic CRS:  WGS 84</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 1,277 × 22</span></span></span>
<span><span class="co">#&gt;       id labnr      bp   std cal_bp cal_std delta…¹ reference    sourc…² mater…³</span></span>
<span><span class="co">#&gt;  <span style="color: #BCBCBC;">*</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>  <span style="text-decoration: underline;">5</span>204 ETH-16…  <span style="text-decoration: underline;">4</span>370    70 <span style="color: #BB0000;">NA</span>     <span style="color: #BB0000;">NA</span>           <span style="color: #BB0000;">NA</span> &lt;named list&gt; AgriCh… charco…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>  <span style="text-decoration: underline;">5</span>205 ETH-18…  <span style="text-decoration: underline;">4</span>365    65 <span style="color: #BB0000;">NA</span>     <span style="color: #BB0000;">NA</span>           <span style="color: #BB0000;">NA</span> &lt;named list&gt; AgriCh… charco…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>  <span style="text-decoration: underline;">5</span>206 ETH-18…  <span style="text-decoration: underline;">4</span>720    60 <span style="color: #BB0000;">NA</span>     <span style="color: #BB0000;">NA</span>           <span style="color: #BB0000;">NA</span> &lt;named list&gt; AgriCh… charco…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>  <span style="text-decoration: underline;">5</span>207 ARC-11…  <span style="text-decoration: underline;">4</span>490    55 <span style="color: #BB0000;">NA</span>     <span style="color: #BB0000;">NA</span>           <span style="color: #BB0000;">NA</span> &lt;named list&gt; AgriCh… charco…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>  <span style="text-decoration: underline;">5</span>208 B-4703   <span style="text-decoration: underline;">4</span>430    40 <span style="color: #BB0000;">NA</span>     <span style="color: #BB0000;">NA</span>           <span style="color: #BB0000;">NA</span> &lt;named list&gt; AgriCh… charco…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>  <span style="text-decoration: underline;">5</span>209 ETH-11…  <span style="text-decoration: underline;">5</span>140    45 <span style="color: #BB0000;">NA</span>     <span style="color: #BB0000;">NA</span>           <span style="color: #BB0000;">NA</span> &lt;named list&gt; AgriCh… charco…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>  <span style="text-decoration: underline;">5</span>210 ARC-10…  <span style="text-decoration: underline;">5</span>070   145 <span style="color: #BB0000;">NA</span>     <span style="color: #BB0000;">NA</span>           <span style="color: #BB0000;">NA</span> &lt;named list&gt; AgriCh… charco…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>  <span style="text-decoration: underline;">5</span>211 ETH-16…  <span style="text-decoration: underline;">5</span>990    75 <span style="color: #BB0000;">NA</span>     <span style="color: #BB0000;">NA</span>           <span style="color: #BB0000;">NA</span> &lt;named list&gt; AgriCh… charco…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>  <span style="text-decoration: underline;">5</span>212 B-4701   <span style="text-decoration: underline;">5</span>740    50 <span style="color: #BB0000;">NA</span>     <span style="color: #BB0000;">NA</span>           <span style="color: #BB0000;">NA</span> &lt;named list&gt; AgriCh… charco…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>  <span style="text-decoration: underline;">5</span>213 ETH-11…  <span style="text-decoration: underline;">5</span>460    45 <span style="color: #BB0000;">NA</span>     <span style="color: #BB0000;">NA</span>           <span style="color: #BB0000;">NA</span> &lt;named list&gt; AgriCh… charco…</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># … with 1,267 more rows, 12 more variables: species &lt;chr&gt;, feature &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   periods &lt;list&gt;, typochronological_units &lt;list&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   ecochronological_units &lt;list&gt;, site &lt;chr&gt;, country &lt;chr&gt;, lat &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   lng &lt;chr&gt;, site_type &lt;chr&gt;, feature_type &lt;chr&gt;, geometry &lt;POINT [°]&gt;, and</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   abbreviated variable names ¹​delta_c13, ²​source_database, ³​material</span></span></span></code></pre></div>
<p>The result is an <code>sf</code> object, which includes the original
data, plus a geometry column representing the point coordinates and
information on the coordinate reference system used.</p>
<p>Change the <code>crs</code> parameter to transform the geometries
into another coordinate reference system. This can be anything
understood by <code><a href="https://r-spatial.github.io/sf/reference/st_crs.html" class="external-link">sf::st_crs()</a></code>). For example, to use the Swiss
National Grid (<a href="https://epsg.io/2056" class="external-link">EPSG:2056</a>):</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/chron_as_sf.html">chron_as_sf</a></span><span class="op">(</span><span class="va">chron_ch</span>, crs <span class="op">=</span> <span class="fl">2056</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning: 570 rows with missing or invalid coordinates were removed.</span></span>
<span><span class="co">#&gt; Simple feature collection with 1277 features and 21 fields</span></span>
<span><span class="co">#&gt; Geometry type: POINT</span></span>
<span><span class="co">#&gt; Dimension:     XY</span></span>
<span><span class="co">#&gt; Bounding box:  xmin: 2341455 ymin: 1090462 xmax: 2825381 ymax: 1289561</span></span>
<span><span class="co">#&gt; Projected CRS: CH1903+ / LV95</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 1,277 × 22</span></span></span>
<span><span class="co">#&gt;       id labnr      bp   std cal_bp cal_std delta…¹ reference    sourc…² mater…³</span></span>
<span><span class="co">#&gt;  <span style="color: #BCBCBC;">*</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>  <span style="text-decoration: underline;">5</span>204 ETH-16…  <span style="text-decoration: underline;">4</span>370    70 <span style="color: #BB0000;">NA</span>     <span style="color: #BB0000;">NA</span>           <span style="color: #BB0000;">NA</span> &lt;named list&gt; AgriCh… charco…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>  <span style="text-decoration: underline;">5</span>205 ETH-18…  <span style="text-decoration: underline;">4</span>365    65 <span style="color: #BB0000;">NA</span>     <span style="color: #BB0000;">NA</span>           <span style="color: #BB0000;">NA</span> &lt;named list&gt; AgriCh… charco…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>  <span style="text-decoration: underline;">5</span>206 ETH-18…  <span style="text-decoration: underline;">4</span>720    60 <span style="color: #BB0000;">NA</span>     <span style="color: #BB0000;">NA</span>           <span style="color: #BB0000;">NA</span> &lt;named list&gt; AgriCh… charco…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>  <span style="text-decoration: underline;">5</span>207 ARC-11…  <span style="text-decoration: underline;">4</span>490    55 <span style="color: #BB0000;">NA</span>     <span style="color: #BB0000;">NA</span>           <span style="color: #BB0000;">NA</span> &lt;named list&gt; AgriCh… charco…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>  <span style="text-decoration: underline;">5</span>208 B-4703   <span style="text-decoration: underline;">4</span>430    40 <span style="color: #BB0000;">NA</span>     <span style="color: #BB0000;">NA</span>           <span style="color: #BB0000;">NA</span> &lt;named list&gt; AgriCh… charco…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>  <span style="text-decoration: underline;">5</span>209 ETH-11…  <span style="text-decoration: underline;">5</span>140    45 <span style="color: #BB0000;">NA</span>     <span style="color: #BB0000;">NA</span>           <span style="color: #BB0000;">NA</span> &lt;named list&gt; AgriCh… charco…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>  <span style="text-decoration: underline;">5</span>210 ARC-10…  <span style="text-decoration: underline;">5</span>070   145 <span style="color: #BB0000;">NA</span>     <span style="color: #BB0000;">NA</span>           <span style="color: #BB0000;">NA</span> &lt;named list&gt; AgriCh… charco…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>  <span style="text-decoration: underline;">5</span>211 ETH-16…  <span style="text-decoration: underline;">5</span>990    75 <span style="color: #BB0000;">NA</span>     <span style="color: #BB0000;">NA</span>           <span style="color: #BB0000;">NA</span> &lt;named list&gt; AgriCh… charco…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>  <span style="text-decoration: underline;">5</span>212 B-4701   <span style="text-decoration: underline;">5</span>740    50 <span style="color: #BB0000;">NA</span>     <span style="color: #BB0000;">NA</span>           <span style="color: #BB0000;">NA</span> &lt;named list&gt; AgriCh… charco…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>  <span style="text-decoration: underline;">5</span>213 ETH-11…  <span style="text-decoration: underline;">5</span>460    45 <span style="color: #BB0000;">NA</span>     <span style="color: #BB0000;">NA</span>           <span style="color: #BB0000;">NA</span> &lt;named list&gt; AgriCh… charco…</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># … with 1,267 more rows, 12 more variables: species &lt;chr&gt;, feature &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   periods &lt;list&gt;, typochronological_units &lt;list&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   ecochronological_units &lt;list&gt;, site &lt;chr&gt;, country &lt;chr&gt;, lat &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   lng &lt;chr&gt;, site_type &lt;chr&gt;, feature_type &lt;chr&gt;, geometry &lt;POINT [m]&gt;, and</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   abbreviated variable names ¹​delta_c13, ²​source_database, ³​material</span></span></span></code></pre></div>
<p>Sometimes you might see a warning about rows with missing or invalid
coordinates being dropped. This is because it is currently not possible
to include rows without a geometry in a simple features table. To
suppress the warning—and clarify your intent—you may want to explicitly
remove these before calling <code><a href="../reference/chron_as_sf.html">chron_as_sf()</a></code>:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">chron_ch</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/chron_as_sf.html">chron_drop_na_coords</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/chron_as_sf.html">chron_as_sf</a></span><span class="op">(</span>crs <span class="op">=</span> <span class="fl">2056</span><span class="op">)</span> <span class="op">-&gt;</span></span>
<span>  <span class="va">chron_ch</span></span></code></pre></div>
<p>sf and related packages offer many options for manipulating,
analysing, and mapping spatial data. As a simple example, we can plot
the location of our dates using their natural projection (here we use
<code><a href="https://r-spatial.github.io/sf/reference/st_geometry.html" class="external-link">sf::st_geometry()</a></code> to plot only the points themselves, not
their data attributes):</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_geometry.html" class="external-link">st_geometry</a></span><span class="op">(</span><span class="va">chron_ch</span><span class="op">)</span>, graticule <span class="op">=</span> <span class="cn">TRUE</span>, axes <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p><img src="xronos_files/figure-html/plot-sf-1.png" width="700"></p>
<p>See the <a href="https://r-spatial.github.io/sf/articles/sf5.html" class="external-link">sf
documentation</a> for more options for plotting simple features.</p>
<p><code>sf</code> objects generally act like data frames, but if
necessary you can explicitly restore the plain table of data with
<code><a href="https://r-spatial.github.io/sf/reference/st_geometry.html" class="external-link">sf::st_drop_geometry()</a></code>:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">chron_ch</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_geometry.html" class="external-link">st_drop_geometry</a></span><span class="op">(</span><span class="va">chron_ch</span><span class="op">)</span></span></code></pre></div>
<p>Note that this does <em>not</em> restore any records that were
dropped by <code><a href="../reference/chron_as_sf.html">chron_as_sf()</a></code>.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Martin Hinz, Joe Roe, <a href="https://www.snf.ch" class="external-link"><img src="reference/figures/snsf_logo.png" title="Swiss National Science Foundation" height="32"></a>.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
